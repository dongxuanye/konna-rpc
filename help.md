# 手写rpc框架，仿dubbo
## 框架结构

### 公用模块
包含传输模型和服务接口

### 服务提供者模块(example-provider)
1.提供者启动类

2.服务实现类

3.配置文件(结合spi机制使用)

### 服务调用者模块(example-consumer)
1.消费者启动类

2.静态代理实现(基本上用不上)

3.配置文件(结合spi机制使用)

### 核心模块(konna-rpc-core)
#### Java
##### config
```java
// 这里写了rpc配置和注册中心配置
```
##### constant
```java
// 定义了文件加载前缀和版本号常量
```
##### fault
###### retry
```java
// 结合spi机制、guava-try库、工厂模式实现了重试策略工厂
// 不重试、固定时间间隔、指数退避等重试策略
```
###### tolerant
```java
// 容错处理
// 结合spi机制、工厂模式实现了容错策略工厂
// 服务降级、快速失败、服务转移、静默处理等四个策略
```
##### loadbalancer
```java
// 负载均衡
// 结合spi机制、工厂模式实现了负载均衡策略工厂
// 轮询、随机、一致性hash、一致性哈希升级版等负载均衡策略
```
##### model
```java
// 定义传输请求、响应和服务元信息模型
```

##### protocol
```java
// 定义传输协议准备
// 常量、传输消息模型、编码器、解码器、序列化器枚举、状态枚举、消息类型类型枚举
```

##### proxy
```java
// 借助代理模式、工厂模式实现了动态代理调用服务
```

##### registry
```java
// 注册中心
// 通过spi机制、策略模式、工厂模式实现了注册中心工厂
// 实现了两种注册中心：etcd注册中心、zookeeper注册中心
// 还有服务元信息缓存
// LocalRegistry 作用是把对应的服务类注册上去，在provider端使用
```

##### serializer
```java
// 通过spi机制、策略模式、工厂模式实现了序列化策略工厂
// 实现了多种序列化策略：jdk、json、Hessian、kryo
```

##### server
```java
// 通过spi机制、策略模式、工厂模式实现了传输协议策略工厂
// 基于vert.x实现了http、tcp传输
// tcp传输中提供了半包和粘包的解决方案
```

##### spi
```java
// 实现了SPI 加载器
```

##### utils
```java
// 封装了配置读取类
```

#### RpcApplication
```java
// 借助了双检锁单例单例模式，实现了配置共享
```


#### resources
```java
// META-INF下面都是spi机制会读取的文件
```
